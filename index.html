<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Portfolio Admin Panel</title>
    <style>
        body {
            font-family: Arial;
            padding: 20px;
            max-width: 900px;
            margin: auto;
        }

        h2 {
            margin-top: 40px;
        }

        textarea,
        input {
            width: 100%;
            padding: 10px;
            margin: 8px 0;
        }

        .btn {
            background: black;
            color: white;
            padding: 10px 20px;
            cursor: pointer;
            border: none;
        }

        .btn:hover {
            opacity: 0.8;
        }

        .project-box {
            border: 1px solid #ccc;
            padding: 15px;
            margin-top: 10px;
        }
    </style>
</head>

<body>

    <h1>Portfolio Admin Panel</h1>

    <!-- ABOUT SECTION -->
    <h2>About Section</h2>
    <textarea id="aboutBio" rows="4" placeholder="Bio"></textarea>
    <input id="aboutExp" placeholder="Experience (eg. 10+)" />
    <input id="aboutProjects" placeholder="Projects Completed (eg. 03)" />
    <button class="btn" onclick="updateAbout()">Update About</button>

    <!-- SKILLS SECTION -->
    <h2>Skills Section</h2>
    <textarea id="technicalSkills" rows="3" placeholder="Technical Skills (comma separated)"></textarea>
    <textarea id="toolSkills" rows="3" placeholder="Tools (comma separated)"></textarea>
    <button class="btn" onclick="updateSkills()">Update Skills</button>

    <!-- PROJECTS SECTION -->
    <h2>Projects Section</h2>
    <div id="projectsContainer"></div>
    <button class="btn" onclick="addProjectForm()">+ Add Project</button>
    <br><br>
    <button class="btn" onclick="updateProjects()">Save All Projects</button>

    <script type="module">
        // ====== Firebase Setup ======
    import {
        initializeApp
    } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
    import {
        getFirestore,
        doc,
        setDoc,
        addDoc,
        collection
    } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

    const firebaseConfig = {
        apiKey: "AIzaSyDLPUtK-NGtlOQUdS_Fe19NqcRiz3eFeCk",
        authDomain: "portfolio-update-cc2b4.firebaseapp.com",
        projectId: "portfolio-update-cc2b4"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // ===============================
    //       UPDATE ABOUT DATA
    // ===============================
    window.updateAbout = async () => {
        await setDoc(doc(db, "portfolio", "content"), {
            name: "Mithusaju",
            bio: document.getElementById("bio").value,
            experience: document.getElementById("experience").value,
            projectsCompleted: document.getElementById("completed").value,
            resumePdf: document.getElementById("resume").value,
            profileImg: document.getElementById("aboutImage").value
        });

        alert("About Section Updated Successfully!");
    };

    // ===============================
    //     UPDATE TECHNICAL SKILLS
    // ===============================
    window.updateTechnicalSkills = async () => {
        const skills = document
            .getElementById("technicalSkills")
            .value.split(",")
            .map(s => s.trim());

        await setDoc(doc(db, "portfolio", "skillsTechnical"), {
            skills
        });

        alert("Technical Skills Updated!");
    };

    // ===============================
    //        UPDATE TOOL SKILLS
    // ===============================
    window.updateToolSkills = async () => {
        const skills = document
            .getElementById("toolSkills")
            .value.split(",")
            .map(s => s.trim());

        await setDoc(doc(db, "portfolio", "skillsTools"), {
            skills
        });

        alert("Tool Skills Updated!");
    };

    // ===============================
    //        ADD PROJECT
    // ===============================
    window.addProject = async () => {
        await addDoc(collection(db, "portfolio", "projects", "items"), {
            title: document.getElementById("projectTitle").value,
            desc: document.getElementById("projectDesc").value,
            img: document.getElementById("projectImg").value,
            link: document.getElementById("projectLink").value,
            buttonText: document.getElementById("projectBtn").value
        });

        alert("Project Added!");
    };
</script>


</body>

</html>